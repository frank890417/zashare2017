webpackJsonp([1],{40:function(e,t,a){"use strict";var i=a(28),n=a(90),s=a(87),o=a.n(s);i.a.use(n.a),t.a=new n.a({routes:[{path:"/",name:"Hello",component:o.a}]})},41:function(e,t,a){function i(e){a(84)}var n=a(38)(a(42),a(88),i,null,null);e.exports=n.exports},42:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},43:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(51),n=a.n(i),s=a(45),o=a(27),r=(a.n(o),a(86)),c=a.n(r);window.PACMAN=s.a,t.default={name:"hello",data:function(){return{globalTime:0,pacMode:"normal",gameScene:"index",dialogContent:"",dialogQuery:[],dialogAvatar:"static/img/Pacman/Normal.svg",dialogState:!1,graveTime:0,canPress:!0,lastKeycode:-1,gameScore:0,pressRecords:[],gameInited:!1,paclives:2,deadtime:0}},mounted:function(){var e=this;window.setScore=this.setScore,window.dialogCallback=this.dialogCallback,window.toSceneDead=this.toSceneDead,window.setlives=this.setlives,window.eatenPill=this.eatenPill,window.userCompleteLevel=this.userCompleteLevel,window.press=this.press,this.globalTime++,o.TweenMax.from(".check",1,{opacity:0,scale:2,bottom:"-30px"}).delay(1),o.TweenMax.from(".title",2,{opacity:0,bottom:"-30px"}).delay(1.5),o.TweenMax.from(".title2",1,{opacity:0,bottom:"-30px"}).delay(2),o.TweenMax.from(".start",1,{opacity:0,bottom:"-30px"}).delay(3),o.TweenMax.from(".prompt",1,{opacity:0,repeat:-1}).delay(4).repeat(),o.TweenMax.from(".pacman",1,{opacity:0}).delay(5),o.TweenMax.to(".castle",1,{top:"0px",scale:"1.1"}).delay(3);var t=this;setInterval(function(){t.globalTime++},100),c()("body").keydown(function(t){console.log(t.which);var a=e;if(a.canPress||a.lastKeycode!=t.which){switch(t.which){case 38:a.press("up");break;case 40:a.press("down");break;case 37:a.press("left");break;case 39:a.press("right");break;case 65:a.press("a");break;case 66:a.press("b");break;case 13:a.press("enter")}a.canPress=!1,a.lastKeycode=t.which,setTimeout(function(){a.canPress=!0},400)}})},computed:{pacimg:function(){return"eating"==this.pacMode?"static/img/Pacman/Eat"+(this.globalTime%3+1)+".svg":"static/img/Pacman/Normal.svg"}},methods:{startGame:function(){var e=this;this.pacMode="eating",o.TweenMax.to(".pacman",2,{left:"-250px"}),o.TweenMax.to(".pacman",1,{opacity:0}).delay(1),setTimeout(function(){e.gameScene="game",e.dialogAvatar="static/img/Pacman/Normal.svg",e.dialogQuery.push("我是pacman 我是中華民國的學生","哇，今天是小學開學的日子，媽媽爸爸說我即將進入中華民國的教育迷宮，好興奮><。","媽媽說，只要拿到好分數，以後就會出人頭地，變成成功ㄉ人","所以我一定要拿到很多一百分！"),e.dialogQuery.push(function(){s.a.init(document.getElementById("pacman"),"static/"),e.gameInited?(setTimeout(function(){s.a.startLevel(),console.log("start level")},500),e.closeDialog()):(e.gameInited=!0,setTimeout(function(){s.a.startNewGame(),console.log("start game")},500),e.closeDialog())}),e.popDialog()},2e3)},goGrave:function(){if(0==this.graveTime)this.dialogQuery.push({avatar:"static/img/Pacman/Grandma.svg",content:"乖孫啊你要往下去哪裡？乖乖在家讀書，不要出去亂晃，以後才會有出息，你爺爺會高興的"}),this.popDialog();else if(1==this.graveTime){this.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"下面什麼都沒有啊...."}),this.popDialog()}else if(2==this.graveTime){var e=this;this.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"好可怕啦..好啦我下去看看...."},function(){e.pacMode="eating",o.TweenMax.to(".pacman",.5,{rotation:"-90deg"}),o.TweenMax.to(".pacman",3,{bottom:"-300px"}).delay(1),e.closeDialog(),setTimeout(function(){e.gameScene="grave",e.dialogQuery.push("好可怕...好多墓碑，都是曾經走過來這裡的....不要，媽媽跟我說只要跟大家一樣玩遊戲就會順利的，我們回去玩遊戲，好不好（害怕）"),e.dialogQuery.push("按上就可以回去ㄌ，遊戲在上面啊啊啊...."),e.graveTime=0,e.popDialog()},3e3)}),this.popDialog()}this.graveTime++},walkDownGrave:function(){var e=this,t=this;0==this.graveTime?(t.dialogQuery.push("我不要繼續走下去喇QQQ"),t.dialogQuery.push(function(){o.TweenMax.to(".pacman",0,{scaleX:1}),o.TweenMax.to(".pacman",2,{left:"-100px"}).delay(0),o.TweenMax.to(".pacman",0,{scaleX:-1}).delay(2),o.TweenMax.to(".pacman",2,{left:"100px"}).delay(2),o.TweenMax.to(".pacman",0,{scaleX:1}).delay(4),o.TweenMax.to(".pacman",2,{left:"0px"}).delay(4)}),t.popDialog()):(t.dialogQuery.push("為什麼要繼續走下去QWQQQ"),t.dialogQuery.push(function(){t.pacMode="eating",o.TweenMax.to(".pacman",.5,{rotation:"-90deg"}),o.TweenMax.to(".pacman",5,{top:"100%"}).delay(1),t.changeScene("door",5),t.closeDialog(),setTimeOut(function(){t.dialogQuery.push({avatar:"static/img/Knight.svg",content:"哇，居然找到這個地方，那你一定與眾不同"}),t.popDialog(),e.graveTime=0},6e3)}),t.popDialog()),this.graveTime++},walkBackGrave:function(){var e=this;e.dialogQuery.push("嗚嗚我們回去了哦，不然走出體制太可怕了"),e.dialogQuery.push(function(){e.pacMode="eating",o.TweenMax.to(".pacman",.5,{rotation:"90deg"}),o.TweenMax.to(".pacman",2,{top:"-500px"}).delay(1),e.changeScene("index",3),e.closeDialog(),setTimeOut(function(){e.dialogQuery.push({avatar:"static/img/Grandma.svg",content:"這才是我的乖孫啊！ 緊去讀冊哦"}),e.popDialog()},3e3)}),e.popDialog()},walkDownDoor:function(){var e=this;e.dialogQuery.push("我們要前往雜學校募資頁啦!!"),e.dialogQuery.push(function(){e.pacMode="eating",o.TweenMax.to(".pacman",5,{top:"100%"}),o.TweenMax.to(".logo",1,{opacity:0}).delay(4),o.TweenMax.to(".gamePad",1,{opacity:0}).delay(4),o.TweenMax.to(".coverBlue",1,{opacity:1}).delay(4),e.closeDialog(),setTimeout(function(){window.location="http://za-share.herokuapp.com/"},5e3)}),e.popDialog()},goSecret:function(){var e=this,t=this;t.dialogQuery=[],t.dialogQuery.push("什麼！？你居然知道上上下下左左右右ABAB這招（不是嘲笑你年紀的意思)，那就直接帶你去募資頁囉！！"),t.dialogQuery.push(function(){t.pacMode="eating",t.changeScene("door",5),setTimeOut(function(){t.dialogQuery.push({avatar:"static/img/Knight.svg",content:"哇，居然找到這個地方，那你一定與眾不同"}),t.popDialog(),e.graveTime=0},500)}),t.popDialog()},relife:function(){var e=this;e.dialogQuery.push("讓我們重新開始吧... 讀書才有可能變成成功的人呢！"),e.dialogQuery.push(function(){e.pacMode="eating",e.changeScene("index",1),e.closeDialog(),o.TweenMax.to(".pacmandead",1,{left:"-200px",opacity:0}),o.TweenMax.to("h1",1,{opacity:0}).delay(1),o.TweenMax.to("h2",1,{opacity:0}).delay(1.5)}),e.popDialog()},press:function(e){if("index"!=this.gameScene||"left"!=e&&"a"!=e||this.startGame(),"index"==this.gameScene&&"down"==e&&this.goGrave(),!this.dialogState||"enter"!=e&&"a"!=e&&"right"!=e||this.dailogAction(),"grave"!=this.gameScene||this.dialogState||"down"!=e||this.walkDownGrave(),"grave"!=this.gameScene||this.dialogState||"up"!=e||this.walkBackGrave(),"door"!=this.gameScene||this.dialogState||"down"!=e||this.walkDownDoor(),"dead"!=this.gameScene||this.dialogState||"left"!=e&&"a"!=e||this.relife(),"game"!=this.gameScene||this.dialogState||"b"!=e||this.changeScene("index"),"game"==this.gameScene&&!this.dialogState){var t={up:3,down:1,left:2,right:11};s.a.sendkey(t[e])}this.pressRecords.push(e),this.pressRecords.length>12&&this.pressRecords.shift(),this.pressRecords.join("/")==["up","up","down","down","left","left","right","right","a","b","a","b"].join("/")&&this.goSecret(),console.log(this.pressRecords)},dailogAction:function(){if(this.dialogQuery.length>0){var e=this.dialogQuery.shift();"string"==typeof e?this.dialogContent=e:"object"==(void 0===e?"undefined":n()(e))?(this.dialogContent=e.content,this.dialogAvatar=e.avatar):"function"==typeof e&&e()}else this.dialogState=!1},popDialog:function(){this.dailogAction(),this.dialogState=!0},closeDialog:function(){this.dialogState=!1},changeScene:function(e,t){var a=this;setTimeout(function(){a.gameScene=e},1e3*t)},setScore:function(e){this.gameScore=e},setlives:function(e){this.paclives=e},eatenPill:function(e){var t=this;s.a.pauseGame(),this.dialogQuery.push({avatar:"static/img/Pacman/Grandma.svg",content:e}),this.dialogQuery.push(function(){t.closeDialog(),s.a.resumeGame();s.a.setState(7)}),this.popDialog()},dialogCallback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.dialogQuery.push(e),t&&this.dialogQuery.push(function(){t()}),this.popDialog()},toSceneDead:function(e){var t=this;t.deadtime++,1==t.deadtime?(t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"糟糕 GG惹，連續兩次考不及格被退學了，回家一定被罵死"}),t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"我這輩子都不可能出人投地了..."}),t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:e}),t.dialogQuery.push(function(){t.changeScene("dead",0),setTimeout(function(){o.TweenMax.from(".pressrompt",1,{opacity:0,repeat:-1}).delay(4).repeat()},500),t.closeDialog()}),t.popDialog()):t.deadtime>=2&&(t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"在中華民國教育的迷宮中，無止盡的求高分並沒有出口"}),t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"我們在不斷的競爭與分數中，迷失了自我，你，還記得自己小時候的夢想嗎？"}),t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"讓我們，嘗試另一條路，從一開始就走出框架的路"}),t.popDialog(),t.dialogQuery.push(function(){t.changeScene("index",.5)}),t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"我們回到了首頁，請一直按下，不要管阿嬤的阻止，也不要害怕"}),t.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"就可以看到教育的大門了"}))},userCompleteLevel:function(){var e=this;e.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:"恭喜你 在中華民國教育迷宮裡面獲得順利，但是人生的成功真的是由分數定義的嗎？"}),e.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:" 要不要試試從一開始就走不同方向呢？<br>A 玩夠了，我要探索分數之外的可能性 | B 不管，我要繼續玩！！"}),e.dialogQuery.push({avatar:"static/img/Pacman/Normal.svg",content:" 要不要試試從一開始就走不同方向呢？<br><span onclick='window.press(\"a\")'> A 玩夠了，我要探索分數之外的可能性</span> | <span onclick='window.press(\"b\")'> B 不管，我要繼續玩！！</span>"}),e.popDialog()}}}},44:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(28),n=a(41),s=a.n(n),o=a(40),r=a(27);a.n(r);i.a.config.productionTip=!1,new i.a({el:"#app",router:o.a,template:"<App/>",components:{App:s.a}})},45:function(e,t,a){"use strict";var i,n=a(50),s=a.n(n),o=a(46),r=a.n(o),c=4,l=3,u=2,g=1,d=11,v=5,m=6,p=7,f=8,h=9,y=10,w={},C="#ff4c00",S="#0047ba";w.FPS=30,w.Ghost=function(e,t,a){function i(e,t){var a=s()?1:r()?4:2,i=e===u&&-a||e===d&&a||0,o=e===g&&a||e===l&&-a||0;return{x:n(t.x,i),y:n(t.y,o)}}function n(e,t){var a=e%10,i=a+t;return 0!==a&&i>10?e+(10-a):a>0&&i<0?e-a:e+t}function s(){return null!==A}function o(){return null===L}function r(){return null===A&&null!==L}function c(){return(k===u||k===d?[l,g]:[u,d])[Math.floor(2*Math.random())]}function v(){L=null,A=null,M={x:90,y:80},k=c(),E=c()}function m(e){return e%10==0}function p(e){return e===u&&d||e===d&&u||e===l&&g||l}function f(){k=p(k),A=e.getTick()}function h(){A=null,L=e.getTick()}function y(e){return Math.round(e/10)}function S(e,t){var a=e%10;return 0===a?e:t===d||t===g?e+(10-a):e-a}function P(e){return m(e.y)&&m(e.x)}function x(t){return(e.getTick()-t)/w.FPS}function T(){return A?x(A)>5&&e.getTick()%20>10?"#FFFFFF":C:L?"#222":a}function b(a){var i=t.blockSize,n=M.y/10*i,s=M.x/10*i;A&&x(A)>8&&(A=null),L&&x(L)>3&&(L=null);var o=s+i,r=n+i-3,c=i/10,v=e.getTick()%10>5?3:-3,m=e.getTick()%10>5?-3:3;a.fillStyle=T(),a.beginPath(),a.moveTo(s,r),a.quadraticCurveTo(s,n,s+i/2,n),a.quadraticCurveTo(s+i,n,s+i,r),a.quadraticCurveTo(o-1*c,r+v,o-2*c,r),a.quadraticCurveTo(o-3*c,r+m,o-4*c,r),a.quadraticCurveTo(o-5*c,r+v,o-6*c,r),a.quadraticCurveTo(o-7*c,r+m,o-8*c,r),a.quadraticCurveTo(o-9*c,r+v,o-10*c,r),a.closePath(),a.fill(),a.beginPath(),a.fillStyle="#FFF",a.arc(s+i/2.5,n+i/2,i/8,0,300,!1),a.arc(s+i-i/2.5,n+i/2,i/8,0,300,!1),a.closePath(),a.fill();var p=i/12,f={};f[d]=[p,0],f[u]=[-p,0],f[l]=[0,-p],f[g]=[0,p],a.beginPath(),a.fillStyle="#000",a.arc(s+i/2.5+f[k][0],n+i/2+f[k][1],i/15,0,300,!1),a.arc(s+i-i/2.5+f[k][0],n+i/2+f[k][1],i/15,0,300,!1),a.closePath(),a.fill()}function D(e){return 100===e.y&&e.x>=190&&k===d?{y:100,x:-10}:100===e.y&&e.x<=-10&&k===u&&(M={y:100,x:190})}function _(e){var a=M,n=P(M),s=null;if(E!==k&&(s=i(E,M),n&&t.isFloorSpace({y:y(S(s.y,E)),x:y(S(s.x,E))})?k=E:s=null),null===s&&(s=i(k,M)),n&&t.isWallSpace({y:y(S(s.y,k)),x:y(S(s.x,k))}))return E=c(),_(e);M=s;var o=D(M);return o&&(M=o),E=c(),{new:M,old:a}}var M=null,k=null,A=null,L=null,E=null;return{eat:h,isVunerable:s,isDangerous:o,makeEatable:f,reset:v,move:_,draw:b}},w.User=function(e,t){function a(e){I+=e,I>=1e4&&I-e<1e4&&(F+=1),window.setScore(I)}function i(){return I}function n(){F-=1}function s(){return window.setlives(F),F}function o(){I=0,F=2,r()}function r(){v(),R=0}function v(){L={x:90,y:120},E=u,Q=u}function m(){o(),v()}function p(e){Q=e}function f(e){return void 0===N[e.keyCode]||(Q=N[e.keyCode],e.preventDefault(),e.stopPropagation(),!1)}function h(e,t){return{x:t.x+(e===u&&-2||e===d&&2||0),y:t.y+(e===g&&2||e===l&&-2||0)}}function y(e){return e%10==0}function C(e){return Math.round(e/10)}function S(e,t){var a=e%10;return 0===a?e:t===d||t===g?e+(10-a):e-a}function P(e,t){return{y:C(S(e.y,t)),x:C(S(e.x,t))}}function T(e){return y(e.y)&&y(e.x)}function b(e,t){return!((e!==u&&e!==d||t!==u&&t!==d)&&(e!==l&&e!==g||t!==l&&t!==g))}function D(i){var n=null,s=null,o=L,r=null;return Q!==E&&(n=h(Q,L),b(Q,E)||T(L)&&t.isFloorSpace(P(n,Q))?E=Q:n=null),null===n&&(n=h(E,L)),T(L)&&t.isWallSpace(P(n,E))&&(E=c),E===c?{new:L,old:L}:(100===n.y&&n.x>=190&&E===d&&(n={y:100,x:-10}),100===n.y&&n.x<=-12&&E===u&&(n={y:100,x:190}),L=n,s=P(L,E),r=t.block(s),((_(L.y)||_(L.x))&&r===w.BISCUIT||r===w.PILL)&&(t.setBlock(s,w.EMPTY),a(r===w.BISCUIT?10:50),R+=1,182===R&&e.completedLevel(),r===w.PILL&&e.eatenPill()),{new:L,old:o})}function _(e){var t=e%10;return t>3||t<7}function M(e,t){return e==d&&t.x%10<5?{start:.25,end:1.75,direction:!1}:e===g&&t.y%10<5?{start:.75,end:2.25,direction:!1}:e===l&&t.y%10<5?{start:1.25,end:1.75,direction:!0}:e===u&&t.x%10<5?{start:.75,end:1.25,direction:!0}:{start:0,end:2,direction:!1}}function k(e,a){var i=t.blockSize,n=i/2;a>=1||(e.fillStyle="#FFFF00",e.beginPath(),e.moveTo(L.x/10*i+n,L.y/10*i+n),e.arc(L.x/10*i+n,L.y/10*i+n,n,0,2*Math.PI*a,!0),e.fill())}function A(e){var a=t.blockSize,i=M(E,L);e.fillStyle="#FFFF00",e.beginPath(),e.moveTo(L.x/10*a+a/2,L.y/10*a+a/2),e.arc(L.x/10*a+a/2,L.y/10*a+a/2,a/2,Math.PI*i.start,Math.PI*i.end,i.direction),e.fill()}var L=null,E=null,R=null,Q=null,F=null,I=5,N={};return N[x.ARROW_LEFT]=u,N[x.ARROW_UP]=l,N[x.ARROW_RIGHT]=d,N[x.ARROW_DOWN]=g,o(),{draw:A,drawDead:k,loseLife:n,getLives:s,score:I,addScore:a,theScore:i,setDue:p,keyDown:f,move:D,newLevel:r,reset:m,resetPosition:v}},w.Map=function(e){function t(e,t){return e>=0&&e<d&&t>=0&&t<v}function a(e){return t(e.y,e.x)&&p[e.y][e.x]===w.WALL}function i(e){if(!t(e.y,e.x))return!1;var a=p[e.y][e.x];return a===w.EMPTY||a===w.BISCUIT||a===w.PILL}function n(e){var t,a,i,n;e.strokeStyle=C,e.lineWidth=m/3,e.lineCap="round";for(var t=0;t<w.WALLS.length;t+=1){n=w.WALLS[t],e.beginPath();for(var a=0;a<n.length;a+=1)i=n[a],i.move?e.moveTo(i.move[0]*m,i.move[1]*m):i.line?e.lineTo(i.line[0]*m,i.line[1]*m):i.curve&&e.quadraticCurveTo(i.curve[0]*m,i.curve[1]*m,i.curve[2]*m,i.curve[3]*m);e.stroke()}}function s(){p=JSON.parse(r()(w.MAP)),d=p.length,v=p[0].length}function o(e){return p[e.y][e.x]}function c(e,t){p[e.y][e.x]=t}function l(e){for(var t=0;t<d;t+=1)for(var a=0;a<v;a+=1)p[t][a]===w.PILL&&(e.beginPath(),e.fillStyle=S,e.fillRect(a*m,t*m,m,m),e.fillStyle=C,e.font="bold "+m/2+"px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("100",a*m+m/2,t*m+m/2),e.fill(),e.closePath())}function u(e){var t,a,i=m;e.fillStyle=S,e.fillRect(0,0,v*i,d*i),n(e);for(var t=0;t<d;t+=1)for(var a=0;a<v;a+=1)g(t,a,e)}function g(e,t,a){var i=p[e][t];i!==w.PILL&&(a.beginPath(),i!==w.EMPTY&&i!==w.BLOCK&&i!==w.BISCUIT||(a.fillStyle=S,a.fillRect(t*m,e*m,m,m),i===w.BISCUIT&&(a.fillStyle="#FFF",a.font="1px Arial",a.fillRect(t*m+m/2.5,e*m+m/2.5,m/6,m/6))),a.closePath())}var d=null,v=null,m=e,p=null;return s(),{draw:u,drawBlock:g,drawPills:l,block:o,setBlock:c,reset:s,isWallSpace:a,isFloorSpace:i,height:d,width:v,blockSize:m}},w.Audio=function(e){function t(e,t,i){var n=c[e]=document.createElement("audio");u[e]=function(t){a(t,e,i)},c[e]&&(n.addEventListener("canplaythrough",u[e],!0),n.setAttribute("preload","true"),n.setAttribute("autobuffer","true"),n.setAttribute("src",t),n.pause())}function a(e,t,a){e.loaded===e.total&&"function"==typeof a&&(a(),c[t]&&c[t].removeEventListener("canplaythrough",u[t],!0))}function i(){for(var e=0;e<g.length;e++)c[g[e]].pause(),c[g[e]].currentTime=0;g=[]}function n(e){var t,a=[],i=!1;c[e].removeEventListener("ended",l[e],!0);for(var t=0;t<g.length;t++)!i&&g[t]?i=!0:a.push(g[t]);g=a}function s(t){console.log("audio trigger"),(c||c[t])&&(e.soundDisabled()||(l[t]=function(){n(t)},g.push(t),c[t]&&(c[t].addEventListener("ended",l[t],!0),c[t].play())))}function o(){for(var e=0;e<g.length;e++)c[g[e]].pause()}function r(){for(var e=0;e<g.length;e++)c[g[e]].play()}var c=[],l=[],u=[],g=[];return{disableSound:i,load:t,play:s,pause:o,resume:r}};var P=function(){function e(){return G}function t(e,t){W.fillStyle="#FFFFFF",W.font="12px BDCartoonShoutRegular",W.fillText(e,t.new.x/10*K.blockSize,(t.new.y+5)/10*K.blockSize)}function a(e){W.fillStyle="#FFFFFF",W.font=K.blockSize+" Arial";var t=W.measureText(e).width,a=22*K.blockSize/2-t/2;W.fillText(e,a,2*(10*K.height+8))}function i(){return"true"===localStorage.soundDisabled}function n(){z.resetPosition();for(var e=0;e<Q.length;e+=1)Q[e].reset();R.play("start"),B=G,u(f)}function s(){u(v),N=1,z.reset(),K.reset(),K.draw(W),n()}function o(){K.draw(W),u(q)}function r(){q=E,u(m),K.draw(W),a("Paused")}function c(e){if(e.keyCode===x.N)s();else if(e.keyCode===x.S)R.disableSound(),localStorage.soundDisabled=!i();else if(e.keyCode===x.P&&E===m)R.resume(),K.draw(W),u(q);else if(e.keyCode===x.P)q=E,u(m),R.pause(),K.draw(W),a("Paused");else if(E!==m)return z.keyDown(e);return!0}function l(){u(v),z.loseLife(),1==z.getLives()&&window.eatenPill("有些迷宮一但進去就走不出來，就像你的人生一樣…"),z.getLives()>0?n():window.toSceneDead("其實你從開始就應該試試看不同的方向")}function u(e){E=e,O=!0}function g(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<10}function d(){}function C(e){K.drawBlock(Math.floor(e.y/10),Math.floor(e.x/10),W),K.drawBlock(Math.ceil(e.y/10),Math.ceil(e.x/10),W)}function S(){var e,a,i,n;A=[];for(var a=0,i=Q.length;a<i;a+=1)A.push(Q[a].move(W));e=z.move(W);for(var a=0,i=Q.length;a<i;a+=1)C(A[a].old);C(e.old);for(var a=0,i=Q.length;a<i;a+=1)Q[a].draw(W);z.draw(W),L=e.new;for(var a=0,i=Q.length;a<i;a+=1)g(L,A[a].new)&&(Q[a].isVunerable()?(I+=1,n=50*I,t(n,A[a]),z.addScore(n),u(h),B=G,R.play("eatghost"),Q[a].eat()):Q[a].isDangerous()&&(u(y),B=G,R.play("die")))}function P(){var e;if(E!==m&&++G,K.drawPills(W),E===p)S();else if(E===v&&O)O=!1,K.draw(W);else if(E===h&&G-B>w.FPS/3)K.draw(W),u(p);else if(E===y)if(G-B>2*w.FPS)l();else{C(L);for(var t=0,i=Q.length;t<i;t+=1)C(A[t].old),A.push(Q[t].draw(W));z.drawDead(W,2*(G-B)/(2*w.FPS))}else E===f&&(e=5+Math.floor((B-G)/w.FPS),0===e?(K.draw(W),u(p)):e!==U&&(U=e,K.draw(W),a("Starting in: "+e)));d()}function T(){B=G,I=0;for(var e=0;e<Q.length;e+=1)Q[e].makeEatable(W);Math.random()>.5?window.eatenPill("乖孫啊你好棒，拿了100分一定會出人頭地的"):window.eatenPill("哇 100分，阿罵知道你最聽話了"),R.play("eatpill")}function b(){u(v),N+=1,K.reset(),z.newLevel(),n(),window.userCompleteLevel()}function D(e){E!==v&&E!==m&&(e.preventDefault(),e.stopPropagation())}function _(t,n){t.innerHTML="";var s,o,r=t.offsetWidth/16,c=document.createElement("canvas"),l=window.innerWidth;l<700&&(r=l/26);var u=window.innerHeight,g=22*r,d=22*r,v=l/d,m=u/g,p=v<m?v:m;c.setAttribute("width",19*r*p+"px"),c.setAttribute("height",22*r*p+"px"),t.appendChild(c),W=c.getContext("2d"),W.scale(p,p),R=new w.Audio({soundDisabled:i}),K=new w.Map(r),z=new w.User({completedLevel:b,eatenPill:T},K),Q=[];for(var s=0,o=F.length;s<o;s+=1){var f=new w.Ghost({getTick:e},K,F[s]);Q.push(f)}K.draw(W),k(),a("Loading ...");var h=Modernizr.audio.ogg?"ogg":"mp3";M([["start",n+"audio/opening_song."+h],["die",n+"audio/die."+h],["eatghost",n+"audio/eatghost."+h],["eatpill",n+"audio/eatpill."+h],["eating",n+"audio/eating.short."+h],["eating2",n+"audio/eating.short."+h]],function(){}),console.log("init complete")}function M(e,t){if(0===e.length)t();else{var a=e.pop();R.load(a[0],a[1],function(){M(e,t)})}}function k(){H=setInterval(P,1e3/w.FPS),document.addEventListener("keydown",c,!1),document.addEventListener("keypress",D,!1)}var A,L,E=v,R=null,Q=[],F=["#00addc","#ff7bd4","#c39bde","#8ae872"],I=0,N=0,G=0,O=!0,B=null,U=0,W=null,H=null,K=null,z=null,q=null;return{init:_,startNewGame:s,keyDown:c,keyPress:D,startLevel:n,pauseGame:r,resumeGame:o,setState:u,sendkey:function(e){z.setDue(e),console.log("pac receive key: "+e)}}}(),x=(i={BACKSPACE:8,TAB:9,NUM_PAD_CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,SEMICOLON:59,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,SELECT:93,NUM_PAD_ASTERISK:106,NUM_PAD_PLUS_SIGN:107,"NUM_PAD_HYPHEN-MINUS":109,NUM_PAD_FULL_STOP:110,NUM_PAD_SOLIDUS:111,NUM_LOCK:144,SCROLL_LOCK:145},s()(i,"SEMICOLON",186),s()(i,"EQUALS_SIGN",187),s()(i,"COMMA",188),s()(i,"HYPHEN-MINUS",189),s()(i,"FULL_STOP",190),s()(i,"SOLIDUS",191),s()(i,"GRAVE_ACCENT",192),s()(i,"LEFT_SQUARE_BRACKET",219),s()(i,"REVERSE_SOLIDUS",220),s()(i,"RIGHT_SQUARE_BRACKET",221),s()(i,"APOSTROPHE",222),i);!function(){for(var e=48;e<=57;e++)x[""+(e-48)]=e;for(var e=65;e<=90;e++)x[""+String.fromCharCode(e)]=e;for(var e=96;e<=105;e++)x["NUM_PAD_"+(e-96)]=e;for(var e=112;e<=123;e++)x["F"+(e-112+1)]=e}(),w.WALL=0,w.BISCUIT=1,w.EMPTY=2,w.BLOCK=3,w.PILL=4,w.MAP=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,4,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,4,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,1,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,3,0,0,1,0,1,0,0,0,0],[2,2,2,2,1,1,1,0,3,3,3,0,1,1,1,2,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,2,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,4,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,4,0],[0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],w.WALLS=[[{move:[0,9.5]},{line:[3,9.5]},{curve:[3.5,9.5,3.5,9]},{line:[3.5,8]},{curve:[3.5,7.5,3,7.5]},{line:[1,7.5]},{curve:[.5,7.5,.5,7]},{line:[.5,1]},{curve:[.5,.5,1,.5]},{line:[9,.5]},{curve:[9.5,.5,9.5,1]},{line:[9.5,3.5]}],[{move:[9.5,1]},{curve:[9.5,.5,10,.5]},{line:[18,.5]},{curve:[18.5,.5,18.5,1]},{line:[18.5,7]},{curve:[18.5,7.5,18,7.5]},{line:[16,7.5]},{curve:[15.5,7.5,15.5,8]},{line:[15.5,9]},{curve:[15.5,9.5,16,9.5]},{line:[19,9.5]}],[{move:[2.5,5.5]},{line:[3.5,5.5]}],[{move:[3,2.5]},{curve:[3.5,2.5,3.5,3]},{curve:[3.5,3.5,3,3.5]},{curve:[2.5,3.5,2.5,3]},{curve:[2.5,2.5,3,2.5]}],[{move:[15.5,5.5]},{line:[16.5,5.5]}],[{move:[16,2.5]},{curve:[16.5,2.5,16.5,3]},{curve:[16.5,3.5,16,3.5]},{curve:[15.5,3.5,15.5,3]},{curve:[15.5,2.5,16,2.5]}],[{move:[6,2.5]},{line:[7,2.5]},{curve:[7.5,2.5,7.5,3]},{curve:[7.5,3.5,7,3.5]},{line:[6,3.5]},{curve:[5.5,3.5,5.5,3]},{curve:[5.5,2.5,6,2.5]}],[{move:[12,2.5]},{line:[13,2.5]},{curve:[13.5,2.5,13.5,3]},{curve:[13.5,3.5,13,3.5]},{line:[12,3.5]},{curve:[11.5,3.5,11.5,3]},{curve:[11.5,2.5,12,2.5]}],[{move:[7.5,5.5]},{line:[9,5.5]},{curve:[9.5,5.5,9.5,6]},{line:[9.5,7.5]}],[{move:[9.5,6]},{curve:[9.5,5.5,10.5,5.5]},{line:[11.5,5.5]}],[{move:[5.5,5.5]},{line:[5.5,7]},{curve:[5.5,7.5,6,7.5]},{line:[7.5,7.5]}],[{move:[6,7.5]},{curve:[5.5,7.5,5.5,8]},{line:[5.5,9.5]}],[{move:[13.5,5.5]},{line:[13.5,7]},{curve:[13.5,7.5,13,7.5]},{line:[11.5,7.5]}],[{move:[13,7.5]},{curve:[13.5,7.5,13.5,8]},{line:[13.5,9.5]}],[{move:[0,11.5]},{line:[3,11.5]},{curve:[3.5,11.5,3.5,12]},{line:[3.5,13]},{curve:[3.5,13.5,3,13.5]},{line:[1,13.5]},{curve:[.5,13.5,.5,14]},{line:[.5,17]},{curve:[.5,17.5,1,17.5]},{line:[1.5,17.5]}],[{move:[1,17.5]},{curve:[.5,17.5,.5,18]},{line:[.5,21]},{curve:[.5,21.5,1,21.5]},{line:[18,21.5]},{curve:[18.5,21.5,18.5,21]},{line:[18.5,18]},{curve:[18.5,17.5,18,17.5]},{line:[17.5,17.5]}],[{move:[18,17.5]},{curve:[18.5,17.5,18.5,17]},{line:[18.5,14]},{curve:[18.5,13.5,18,13.5]},{line:[16,13.5]},{curve:[15.5,13.5,15.5,13]},{line:[15.5,12]},{curve:[15.5,11.5,16,11.5]},{line:[19,11.5]}],[{move:[5.5,11.5]},{line:[5.5,13.5]}],[{move:[13.5,11.5]},{line:[13.5,13.5]}],[{move:[2.5,15.5]},{line:[3,15.5]},{curve:[3.5,15.5,3.5,16]},{line:[3.5,17.5]}],[{move:[16.5,15.5]},{line:[16,15.5]},{curve:[15.5,15.5,15.5,16]},{line:[15.5,17.5]}],[{move:[5.5,15.5]},{line:[7.5,15.5]}],[{move:[11.5,15.5]},{line:[13.5,15.5]}],[{move:[2.5,19.5]},{line:[5,19.5]},{curve:[5.5,19.5,5.5,19]},{line:[5.5,17.5]}],[{move:[5.5,19]},{curve:[5.5,19.5,6,19.5]},{line:[7.5,19.5]}],[{move:[11.5,19.5]},{line:[13,19.5]},{curve:[13.5,19.5,13.5,19]},{line:[13.5,17.5]}],[{move:[13.5,19]},{curve:[13.5,19.5,14,19.5]},{line:[16.5,19.5]}],[{move:[7.5,13.5]},{line:[9,13.5]},{curve:[9.5,13.5,9.5,14]},{line:[9.5,15.5]}],[{move:[9.5,14]},{curve:[9.5,13.5,10,13.5]},{line:[11.5,13.5]}],[{move:[7.5,17.5]},{line:[9,17.5]},{curve:[9.5,17.5,9.5,18]},{line:[9.5,19.5]}],[{move:[9.5,18]},{curve:[9.5,17.5,10,17.5]},{line:[11.5,17.5]}],[{move:[8.5,9.5]},{line:[8,9.5]},{curve:[7.5,9.5,7.5,10]},{line:[7.5,11]},{curve:[7.5,11.5,8,11.5]},{line:[11,11.5]},{curve:[11.5,11.5,11.5,11]},{line:[11.5,10]},{curve:[11.5,9.5,11,9.5]},{line:[10.5,9.5]}]],t.a=P},84:function(e,t){},85:function(e,t){},87:function(e,t,a){function i(e){a(85)}var n=a(38)(a(43),a(89),i,"data-v-3e3487d8",null);e.exports=n.exports},88:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid",attrs:{id:"app"}},[a("img",{staticClass:"logo",attrs:{src:"static/img/Header/Logo.svg"}}),a("router-view")],1)},staticRenderFns:[]}},89:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gameIndex"},[a("div",{staticClass:"gamePad"},[a("div",{staticClass:"direction"},[a("img",{staticClass:"up",attrs:{src:"static/img/GamePad/Button/Up.svg"},on:{click:function(t){e.press("up")}}}),a("div",{staticClass:"lr"},[a("img",{staticClass:"left",attrs:{src:"static/img/GamePad/Button/Left.svg"},on:{click:function(t){e.press("left")}}}),a("div",{staticClass:"cblock"}),a("img",{staticClass:"right",attrs:{src:"static/img/GamePad/Button/Right.svg"},on:{click:function(t){e.press("right")}}})]),a("img",{staticClass:"down",attrs:{src:"static/img/GamePad/Button/Down.svg"},on:{click:function(t){e.press("down")}}})]),a("div",{staticClass:"buttons"},[a("img",{staticClass:"a",attrs:{src:"static/img/GamePad/Button/A.svg"},on:{click:function(t){e.press("a")}}}),a("img",{staticClass:"b",attrs:{src:"static/img/GamePad/Button/B.svg"},on:{click:function(t){e.press("b")}}})])]),a("transition",{attrs:{name:"fade"}},[e.dialogState?a("div",{staticClass:"dialog row"},[a("div",{staticClass:"col-3 colAvator"},[a("img",{staticClass:"dialogAvatar",attrs:{src:e.dialogAvatar}})]),a("div",{staticClass:"col-9 colContent"},[a("p",{staticClass:"content",domProps:{innerHTML:e._s(e.dialogContent)}}),a("img",{staticClass:"dailogAction",attrs:{src:"static/img/Dialog/Action.svg"},on:{click:e.dailogAction}})])]):e._e()]),a("transition-group",{attrs:{tag:"div",name:"fade"}},["index"==e.gameScene?a("div",{key:"index",staticClass:"sceneIndex container-fluid"},[a("div",{staticClass:"row rowIndex"},[a("div",{staticClass:"col-sm-4 col-12 align-self-end order-sm-first offset-sm-0"},[a("img",{staticClass:"castle",attrs:{src:"static/img/School.svg"}}),a("img",{staticClass:"pacman hidden-sm-up",attrs:{src:e.pacimg}})]),a("div",{staticClass:"col-sm-8 align-self-center"},[a("h4",{staticClass:"row row_indexRightplace"},[a("div",{staticClass:"col-1"},[a("img",{staticClass:"check",attrs:{src:"static/img/Check.svg"}})]),a("div",{staticClass:"col-10"},[a("p",{staticClass:"indexRightplaceText"},[a("span",{staticClass:"hidden-sm-down"},[e._v("別懷疑，你沒來錯地方"),a("br"),e._v("但雜學校募資頁在哪呢？就要靠你自己拿到分數看到了")]),a("span",{staticClass:"hidden-sm-up"},[e._v("你沒來錯地方"),a("br"),e._v("但雜學校募資頁"),a("br"),e._v("要靠拿高分才能找到（笑")])])])]),a("br"),a("h1",{staticClass:"title"},[e._v("聽說只要拿100分")]),a("h2",{staticClass:"title2"},[e._v("人生就會一片光明呢")]),a("h3",{staticClass:"start"},[e._v("往左開始進入中華民國教育迷宮"),a("br"),e._v("盡可能的拿到高分數炫耀吧！！")]),a("div",{staticClass:"prompt"},[e._v("Press A or  "),a("img",{staticStyle:{transform:"rotate(180deg) scale(0.7)"},attrs:{src:"static/img/Dialog/Action.svg"}}),e._v(" to Start.")]),a("br"),a("br"),a("br"),a("img",{staticClass:"pacman hidden-xs-down",attrs:{src:e.pacimg}})])])]):e._e(),"game"==e.gameScene?a("div",{key:"game",staticClass:"sceneGame container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2 colGameInfo order-sm-last"},[a("h2",[e._v("中華民國の教育迷宮")]),a("h3",[e._v("Score:"+e._s(e.gameScore)),a("br",{staticClass:"hidden-xs-down"}),e._l(e.paclives,function(e){return a("img",{staticClass:"pacmanlive",attrs:{src:"static/img/Pacman/Normal.svg"}})})],2),a("h4",{staticClass:"hidden-xs-down"},[e._v("按B回到首頁")])]),a("div",{staticClass:"col-12 col-sm-10 order-sm-first-down"},[a("div",{attrs:{id:"pacman"}})])])]):e._e(),"grave"==e.gameScene?a("div",{key:"game",staticClass:"sceneGrave container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-5 col-sm-7"},[a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("br"),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("br"),a("div",{staticClass:"hidden-xs-down"},[a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}})])]),a("div",{staticClass:"col-3 col-sm-2"},[a("img",{staticClass:"pacman",attrs:{src:e.pacimg}})]),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("div",{staticClass:"col-sm-4"},[a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}}),a("br"),a("br"),a("img",{staticClass:"grave",attrs:{src:"static/img/grave.svg"}})])])]):e._e(),"door"==e.gameScene?a("div",{key:"door",staticClass:"sceneDoor container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("br"),a("br"),a("br"),a("h1",[e._v("什麼！？ "),a("br"),e._v("真虧你能找到這")]),a("h2",[e._v("下面的門就是了")]),a("br"),a("h3",[e._v("你尋覓著，給予跳脫框架者的舞台")]),a("h1",[e._v("雜學校")]),a("h3",[e._v("往下一起探索教育的面貌吧!")])])]),a("div",{staticClass:"coverBlue"}),a("img",{staticClass:"pacman",attrs:{src:e.pacimg}}),a("img",{staticClass:"door",attrs:{src:"static/img/Door.svg"}})]):e._e(),"dead"==e.gameScene?a("div",{key:"dead",staticClass:"sceneDead container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("img",{staticClass:"pacmandead",attrs:{src:"static/img/Pacman/Dead.svg"}}),a("br"),a("h1",[e._v("你在中華民國教育體制裡")]),a("h2",[e._v("就這麼失敗了")]),a("h2",[e._v("重頭來一遍？")])]),a("div",{staticClass:"col-sm-6"},[a("h5",{staticClass:"pressprompt"},[e._v("Press A to Restart.")])])])]):e._e()])],1)},staticRenderFns:[]}}},[44]);
//# sourceMappingURL=app.fd615903cce2a45c409f.js.map